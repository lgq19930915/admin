webpackJsonp([4],{"m/eM":function(t,e){},ogbC:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("EN0V"),s=i("4YfN"),a=i.n(s),o={components:{},props:["s"],data:function(){return{isAdmin:localStorage.getItem("isAdmin"),user:{tit:"",con:"",time:""}}},computed:{},watch:{},methods:{cancel:function(){this.empty(),this.$emit("hide")},empty:function(){this.user={title:"",con:"",time:""}},confirm:function(){var t=this,e=a()({},this.user,{time:new Date(this.user.time).getTime()});Object(n.h)(e).then(function(e){e.data.isok&&(t.$message({message:e.data.info,type:"success"}),t.empty(),t.$emit("hide"),t.$emit("init"))})},look:function(t){var e=this;Object(n.d)({id:t}).then(function(t){t.data.isok&&(e.user=t.data.data[0],e.user.time=new Date(parseInt(e.user.time)))})},update:function(){var t=this;delete this.user._id,this.user.time=new Date(this.user.time).getTime(),Object(n.q)(this.user).then(function(e){e.data.isok&&(t.$message({message:e.data.info,type:"success"}),t.empty(),t.$emit("hide"),t.$emit("init"))})}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:t.s.title,visible:t.s.showDialog},on:{"update:visible":function(e){return t.$set(t.s,"showDialog",e)}}},[i("el-row",[i("el-col",{staticClass:"lable",attrs:{span:4}},[t._v("题目：")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-input",{attrs:{disabled:"2"==t.isAdmin},model:{value:t.user.tit,callback:function(e){t.$set(t.user,"tit",e)},expression:"user.tit"}})],1)],1),t._v(" "),i("el-row",[i("el-col",{staticClass:"lable",attrs:{span:4}},[t._v("内容：")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-input",{attrs:{type:"textarea",disabled:"2"==t.isAdmin},model:{value:t.user.con,callback:function(e){t.$set(t.user,"con",e)},expression:"user.con"}})],1)],1),t._v(" "),i("el-row",[i("el-col",{staticClass:"lable",attrs:{span:4}},[t._v("时间：")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-date-picker",{attrs:{disabled:"2"==t.isAdmin,type:"date",placeholder:"选择日期"},model:{value:t.user.time,callback:function(e){t.$set(t.user,"time",e)},expression:"user.time"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),t.s.isAdd?i("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("添 加")]):i("el-button",{attrs:{type:"primary",disabled:"2"==t.isAdmin},on:{click:t.update}},[t._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var r={components:{addNews:i("C7Lr")(o,c,!1,function(t){i("wO3t")},"data-v-2e3615d0",null).exports},data:function(){return{isAdmin:localStorage.getItem("isAdmin"),arr:[],status:{title:"添加通知",isAdd:!0,showDialog:!1}}},computed:{},watch:{},methods:{willadd:function(){this.status.title="添加通知",this.status.showDialog=!0,this.status.isAdd=!0},hide:function(){this.status.showDialog=!1},init:function(){var t=this;Object(n.d)({}).then(function(e){e.data.isok&&(t.arr=e.data.data)})},look:function(t){this.$refs.add.look(t),this.status.title="修改管理员",this.status.isAdd=!1,this.status.showDialog=!0},del:function(t){var e=this;this.$confirm("你确定要删除吗？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.l)({id:t}).then(function(t){t.data.isok&&(e.$message({type:"success",message:t.data.info}),e.init())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},created:function(){},mounted:function(){this.init()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v("通知列表")]),t._v(" "),"2"!=t.isAdmin?i("el-button",{attrs:{type:"success"},on:{click:t.willadd}},[t._v("新增")]):t._e(),t._v(" "),i("el-row",[i("el-col",{attrs:{span:20,offset:2}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.arr}},[i("el-table-column",{attrs:{prop:"tit",label:"题目",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("time")(e.row.time)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"warning"},on:{click:function(i){return t.look(e.row.id)}}},[t._v("查看")]),t._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),i("add-news",{ref:"add",attrs:{s:t.status},on:{hide:t.hide,init:t.init}})],1)},staticRenderFns:[]};var u=i("C7Lr")(r,l,!1,function(t){i("m/eM")},"data-v-1af3ec7a",null);e.default=u.exports},wO3t:function(t,e){}});
//# sourceMappingURL=4.c6b2e4d31eaf4b2649b8.js.map